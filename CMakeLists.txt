cmake_minimum_required(VERSION 2.8)

set(TARGET qc)
set(SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/src)
set(INCLUDE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/include)

include_directories(${INCLUDE_DIR} ${SOURCE_DIR}/util)
link_directories(${CMAKE_CURRENT_SOURCE_DIR}/lib)

file(GLOB_RECURSE SOURCE_LIST ${SOURCE_DIR}/*.cpp)
file(GLOB_RECURSE HEADER_LIST ${SOURCE_DIR}/*.hpp)

add_library(${TARGET} STATIC ${SOURCE_LIST})

install(TARGETS ${TARGET} ARCHIVE
        DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/lib)
install(DIRECTORY ${INCLUDE_DIR}
        DESTINATION ${CMAKE_CURRENT_BINARY_DIR})
install(DIRECTORY ${SOURCE_DIR}/qc ${SOURCE_DIR}/util
        DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/include
        FILES_MATCHING PATTERN "*.hpp")

set(CMAKE_CXX_FLAGS "")
set(CMAKE_CXX_FLAGS_DEBUG "-g")
set(CMAKE_CXX_FLAGS_RELEASE "-DNDEBUG -O2")

add_definitions(${CMAKE_CXX_FLAGS} "-std=c++11 -Wall")
